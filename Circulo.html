<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graficacion</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body onload="Regla();">
    <!-- Loading -->
    <Section id="loading" class="absolute h-[100vh] w-[100vw] bg-white/30 z-20 text-center grid place-content-center gap-3">
        <div class="h-80 w-80 bg-white rounded-full grid place-content-center">
            <img src="neco-arc.gif" class="h-60" alt="">
        </div>
        <h1 class="font-bold text-5xl text-[#222831]"> Cargando ... </h1>
    </Section>

    <!-- UI -->
    <section class="flex text-[#EEEEEE] bg-[#222831] overflow-y-hidden md:overflow-x-hidden">
        <div class="min-w-[295px] max-w-[30%] px-5 h-screen bg-[#31363F]">            
            <h2 class="mt-5 mb-6 text-center text-4xl font-medium">Triangulos</h2>
            <h1>Segunda cordenada</h1>
            <div class="flex mb-3 gap-5 justify-center">
                <input class="w-20 h-10 px-2 bg-[#76ABAE] text-[#222831] rounded-lg placeholder:text-[#EEEEEE]" placeholder="x2" type="number" name="" id="inputX2" oninput="updateX2();">
                <input class="w-20 h-10 px-2 bg-[#76ABAE] text-[#222831] rounded-lg placeholder:text-[#EEEEEE]" placeholder="y2" type="number" name="" id="inputY2" oninput="updateY2();" >
            </div>
            <div class="flex gap-5">
                <button type="button" id="boton" class="w-full py-1 my-5 bg-[#EEEEEE] text-[#222831] rounded-md font-medium hover:bg-[#76ABAE] hover:text-[#EEEEEE]" onclick="doTriangle()">
                    Dibuja
                </button>
                <button type="button" id="boton" class="w-full py-1 my-5 bg-[#EEEEEE] text-[#222831] rounded-md font-medium hover:bg-[#76ABAE] hover:text-[#EEEEEE]" onclick="limpiar()">
                    Limpiar
                </button>
            </div>
            <div>
                <h3 class="pb-6 text-2xl font-bold text-center text-[#76ABAE]"> 
                    Tablas
                </h3>
                <div class="rounded-lg border-2 border-[#76ABAE]">
                    <div class="flex py-2 w-full text-center font-bold text-[#31363F] bg-[#76ABAE]">
                        <h1 class="w-1/2 text-center">X</h1>
                        <h1 class="w-1/2 text-center">Y</h1>
                    </div>
                    <div class="overflow-y-scroll h-80 w-[100%]">
                        <table id="tabla-vertices-1" class="text-[#EEEEEE] w-[200px]">
                            <tbody class="w-[100%]"> 
                                <!-- Aquí se llenará la tabla con los datos -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        </div>
        <div class="h-[80vh] mt-5 relative">
            <div>
                <canvas width="1225" height="700" id="plano-canvas"></canvas>
                <div class="absolute top-0 h-[700px] w-[1225px] text-black">
                    <div class="flex absolute top-[51%] left-[60px] gap-1">
                        <p class="w-8">-150</p>
                        <p class="w-8">-140</p>
                        <p class="w-8">-130</p>
                        <p class="w-8">-120</p>
                        <p class="w-8">-110</p>
                        <p class="w-8">-100</p>
                        <p class="w-8">-90</p>
                        <p class="w-8">-80</p>
                        <p class="w-8">-70</p>
                        <p class="w-8">-60</p>
                        <p class="w-8">-50</p>
                        <p class="w-8">-40</p>
                        <p class="w-8">-30</p>
                        <p class="w-8">-20</p>
                        <p class="w-8">-10</p>
                        <p class="w-8 text-transparent">.</p>
                        <p class="w-8">10</p>
                        <p class="w-8">20</p>
                        <p class="w-8">30</p>
                        <p class="w-8">40</p>
                        <p class="w-8">50</p>
                        <p class="w-7">60</p>
                        <p class="w-8">70</p>
                        <p class="w-8">80</p>
                        <p class="w-6">90</p>
                        <p class="w-8">100</p>
                        <p class="w-8">110</p>
                        <p class="w-8">120</p>
                        <p class="w-8">130</p>
                        <p class="w-8">140</p>
                        <p class="w-8">150</p>
                    </div>
                    <div class="grid absolute left-[49.5%] top-[-5px] gap-3 text-right">
                        <p class="h-6">100</p>
                        <p class="h-6">90</p>
                        <p class="h-5">80</p>
                        <p class="h-6">70</p>
                        <p class="h-6">60</p>
                        <p class="h-5">50</p>
                        <p class="h-6">40</p>
                        <p class="h-6">30</p>
                        <p class="h-5">20</p>
                        <p class="h-6">10</p>
                        <p class="h-6 text-left text-[#76ABAE]">0</p>
                        <p class="h-6">-10</p>
                        <p class="h-5">-20</p>
                        <p class="h-6">-30</p>
                        <p class="h-6">-40</p>
                        <p class="h-5">-50</p>
                        <p class="h-6">-60</p>
                        <p class="h-6">-70</p>
                        <p class="h-5">-80</p>
                        <p class="h-6">-90</p>
                        <p class="h-6">-100</p>

                    </div>
                </div>
            </div>
            <div class="absolute top-0">
                <canvas width="1225" height="700" id="webgl-canvas"></canvas>
            </div>
        </div>
    </section>
   
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gl-matrix/2.8.1/gl-matrix-min.js"></script>
     
    <!-- WebGL -->
    <script> 
        let x1 = 0, y1 = 0, x2, y2, x3, y3;
        let Chec_x1,Chec_y1; 
        let IsTarget = false;
        let isFirstRun = false;
        let load = false;

        function updateX2() { 
            const inputX2 = document.getElementById('inputX2'); 
            x2 = parseFloat(inputX2.value); 
        }
        
        function Lineas(vertices,px_1,py_1,px_2,py_2,dis,tabla,lateral,Texto,num) {
 
            console.log(px_1,py_1);

            let Bool_x = false; //si va de arriba a abajo
            let Bool_y = false;
            const VerTab = [];

            if(px_1 < px_2 ){
                Bool_x = true; //si va de abajo a arriba
            }
            if(py_1 < py_2 ){
                Bool_y = true;
            } 

            let M = (py_2 - py_1)/(px_2 - px_1);
            let DX = (px_2 - px_1);
            let DY = (py_2 - py_1);

            DX = Math.abs(DX);
            DY = Math.abs(DY);

            let Pasos = DX > DY ? DX : DY; 
            let IN_X = DX / Pasos;
            let IN_Y = DY / Pasos;

            if (px_1 > px_2){
                IN_X = -IN_X;
            }
            if (py_1 > py_2){
                IN_Y = -IN_Y;
            }

            num.placeholder = (M);
            // Consola
            // console.log('x1 es el mayor? ', Bool_x, ', y1 es el mayor?',Bool_y);
            // console.log('DX : ',DX);
            // console.log('DY : ',DY);
            // console.log('pasos : ',Pasos);
            // console.log('IN_X : ',IN_X);
            // console.log('IN_Y : ',IN_Y);

            // Definir los vértices de la línea
            // vertices.push(px_1,py_1);
            // VerTab.push(px_1,py_1);

            if ((Bool_x == true)&&(Bool_y == true)){
                Texto.placeholder = 'Izquierda a Derecha, Abajo a Arriba';
                for (;(px_1 <= px_2) && (py_1 <= py_2);){
                    vertices.push(px_1,py_1);
                    VerTab.push(px_1,py_1);
                    if(IsTarget == true){
                        lateral.push(px_1,py_1);
                    }
                    px_1 += IN_X * dis;
                    py_1 += IN_Y * dis;
                    console.log(x1, y1);
                    if ((px_1 > 500) || (py_1 > 500)){
                        break;
                    }
                }
            } if ((Bool_x == false)&&(Bool_y == false)){
                Texto.placeholder = 'Derecha a Izquierda, Arriba a Abajo';
                for (;(px_1 >= px_2) && (py_1 >= py_2);){
                    vertices.push(px_1,py_1);
                    VerTab.push(px_1,py_1);
                    if(IsTarget == true){
                        lateral.push(px_1,py_1);
                    }
                    px_1 += IN_X * dis;
                    py_1 += IN_Y * dis;
                    console.log(px_1, py_1);
                    if ((px_1 > 500) || (py_1 > 500)){
                        break;
                    }
                }
            } if ((Bool_x == true)&&(Bool_y == false)){
                Texto.placeholder = "Izquierda a Derecha, Arriba a Abajo";
                for (;(px_1 <= px_2) && (py_1 >= py_2);){
                    vertices.push(px_1,py_1);
                    VerTab.push(px_1,py_1);
                    if(IsTarget == true){
                        lateral.push(px_1,py_1);
                    }
                    px_1 += IN_X * dis;
                    py_1 += IN_Y * dis;
                    console.log(px_1, py_1);
                    if ((px_1 > 500) || (py_1 > 500)){
                        break;
                    }
                }
            } if ((Bool_x == false)&&(Bool_y == true)){
                Texto.placeholder = 'Derecha a Izquierda, Abajo a Arriba';
                for (;(px_1 >= px_2) && (py_1 <= py_2);){
                    vertices.push(px_1,py_1);
                    if(IsTarget == true){
                        lateral.push(px_1,py_1);
                    } 
                    VerTab.push(px_1,py_1);
                    px_1 += IN_X * dis;
                    py_1 += IN_Y * dis;
                    console.log(px_1, py_1);
                    if ((px_1 > 500) || (py_1 > 500)){
                        break;
                    }
                }
            }
            vertices.push(px_2, py_2);
            VerTab.push(px_2,py_2);
            if(IsTarget == true){
                lateral.push(px_2,py_2);
            }
            
            if (VerTab.length > 4)
            {
                for (let i = 0; i < VerTab.length; i += 2) {
                    // Crear una nueva fila en la tabla
                    const fila = tabla.insertRow();

                    // Insertar la coordenada X en la primera celda de la fila
                    const celdaX = fila.insertCell(0);
                    celdaX.textContent = '' + parseFloat(VerTab[i]).toFixed(2);
                    // Crear una nueva fila para la coordenada Y
                    const celdaY = fila.insertCell(1);
                    celdaY.textContent = '' + parseFloat(VerTab[i + 1]).toFixed(2);
                }
            } 

            return vertices, lateral;
        }

        function LineaVariant(vertices,px_1,py_1,px_2,py_2,dis) { 
        let Bool_x = false;
        let Bool_y = false;
        let XL, YL;

        if(px_1 < px_2 ){
            Bool_x = true;
        }
        if(py_1 < py_2 ){
            Bool_y = true;
        } 

        let M = (py_2 - py_1)/(px_2 - px_1);
        let DX = (px_2 - px_1);
        let DY = (py_2 - py_1);

        DX = Math.abs(DX);
        DY = Math.abs(DY);

        let Pasos = DX > DY ? DX : DY; 
        let IN_X = DX / Pasos;
        let IN_Y = DY / Pasos;

        if (px_1 > px_2){
            IN_X = -IN_X;
        }
        if (py_1 > py_2){
            IN_Y = -IN_Y;
        } 

        if ((Bool_x == true)&&(Bool_y == true)){
            for (;(px_1 <= px_2) && (py_1 <= py_2);){
                vertices.push(px_1,py_1);
                px_1 += IN_X * dis;
                py_1 += IN_Y * dis;
                console.log(x1, y1);
                if ((px_1 > 500) || (py_1 > 500) || ((px_1 == XL) && (py_1 == YL))){
                    break;
                }
                XL = px_1;
                YL = py_1;
            }
        } if ((Bool_x == false)&&(Bool_y == false)){
            for (;(px_1 >= px_2) && (py_1 >= py_2);){
                vertices.push(px_1,py_1); 
                px_1 += IN_X * dis;
                py_1 += IN_Y * dis;
                console.log(px_1, py_1);
                if ((px_1 > 500) || (py_1 > 500) || ((px_1 == XL) && (py_1 == YL))){
                    break;
                }
                XL = px_1;
                YL = py_1;
            }
        } if ((Bool_x == true)&&(Bool_y == false)){
            for (;(px_1 <= px_2) && (py_1 >= py_2);){
                vertices.push(px_1,py_1); 
                px_1 += IN_X * dis;
                py_1 += IN_Y * dis;
                console.log(px_1, py_1);
                if ((px_1 > 500) || (py_1 > 500) || ((px_1 == XL) && (py_1 == YL))){
                    break;
                }
                XL = px_1;
                YL = py_1;
            }
        } if ((Bool_x == false)&&(Bool_y == true)){
            for (;(px_1 >= px_2) && (py_1 <= py_2);){
                vertices.push(px_1,py_1);
                px_1 += IN_X * dis;
                py_1 += IN_Y * dis;
                console.log(px_1, py_1);
                if ((px_1 > 500) || (py_1 > 500) || ((px_1 == XL) && (py_1 == YL))){
                    break;
                }
                XL = px_1;
                YL = py_1;
            }
        }
        vertices.push(px_2, py_2);

        return vertices;
        }

        function limpiar(){
            const canvas = document.getElementById('webgl-canvas');
            const gl = canvas.getContext('webgl');

            if (!gl) {
                console.error('Tu navegador no soporta WebGL');
                return;
            } 

            gl.clearColor(0.0, 0.0, 0.0, 0.0); // Color de fondo negro
            gl.clear(gl.COLOR_BUFFER_BIT);
        }

        function doTriangle (){
            var section = document.getElementById('loading');
            section.style = 'display: in-line;';
            setTimeout(function() {
                start();
                if (load == true) {
                    section.style = 'display: none;';
                    load = false;
                }
            }, 2000);
        }

        function ChecVertices(x1,y1,R,lateral){
            let Rr, k = 0 ;
            let p = 1 - R;
            let x = x1, y = R; 
            lateral.push(x,R);
            for(; x < y ;){
                if (p < 0){
                    x++; 
                    // console.log(x,' , ',y, 'case A, p = ',p);
                    p = p + (2 * x) + 1;
                    lateral.push(x,y);
                }
                if (p >= 0){
                    x++;
                    y--; 
                    // console.log(x,' , ',y, ' case B, p = ',p);
                    p = p + (2 * x) + 1 - (2 * y);
                    lateral.push(x,y);
                }
                // console.log(x, y);
                if ( x == 500 || y == 500 )
                {
                    break
                }
            }

            console.log('Chec',lateral.length);

            let first = lateral.length;
            
            for(let i = lateral.length - 3 ; i >= 0 ; i--){
                // console.log(vertices[i]);
                lateral.push(lateral[i]);
            }

            for(let i = lateral.length - 1 ; i >= 0 ;){
                // console.log(vertices[i]);
                lateral.push(lateral[i]);
                lateral.push(-lateral[i - 1]);

                i -= 2;
            }

            for(let i = 0 ; i < (first * 2) ;){
                // console.log(-lateral[i]);
                // console.log(lateral[i+1]);

                lateral.push(-lateral[i]);
                lateral.push(lateral[i + 1]);
 
                lateral.push(-lateral[i]);
                lateral.push(-lateral[i + 1]);

                i += 2;
            }

            console.log(lateral);
            return lateral;
        }

        function Tabla(Datos, tabla){
            // console.log('a ',Datos.length);
            if (Datos.length > 4)
            {
                for (let i = 0; i < Datos.length; i += 2) { 
                    const fila = tabla.insertRow(); 
                    const celdaX = fila.insertCell(0);
                    celdaX.textContent = '' + parseFloat(Datos[i]).toFixed(2); 
                    const celdaY = fila.insertCell(1);
                    celdaY.textContent = '' + parseFloat(Datos[i + 1]).toFixed(2);
                }
            } 
        }

        function start() {
            const canvas = document.getElementById('webgl-canvas');
            const gl = canvas.getContext('webgl', {antialias:true} );
            const canvasWidth = canvas.clientWidth;
            const canvasHeight = canvas.clientHeight;
            const aspectRat = canvasWidth / canvasHeight;
            gl.viewport(0, 0, canvasWidth, canvasHeight);

            const projectionMatrix = mat4.create();
            mat4.ortho(projectionMatrix, -700, 700, -400, 400, -1, 1);

            const tabla1 = document.getElementById('tabla-vertices-1').getElementsByTagName('tbody')[0];

            if (isFirstRun == true) { 
                tabla1.innerHTML = '';
            }

            // x1 = Chec_x1;
            // y1 = Chec_y1;

            //  inicio 
            let dis = 0.1;
            const vertices = [];
            const lateral = [];            


            if ((x1 != null) || (y1 != null)){
                ChecVertices(x1,y1,x2,lateral);
                Tabla(lateral, tabla1);
            }

            if (x1 != null){ 
                for(let i = 0; i <= lateral.length - 1 ;) {
                    let x = lateral[i];
                    let y = lateral[i + 1];
                    LineaVariant(vertices,x1,y1,x,y,dis); 
                    // console.log(i, ' , ( ',x,' , ',y, ' ) , ',lateral.length-1 )
                    i += 2;
                }
                isFirstRun = true;
            }


            if (!gl) {
                console.error('Tu navegador no soporta WebGL');
                return;
            } 

            // Crear un buffer para los vértices
            const vertexBuffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);

            // Crear el programa de shaders
            const vertexShaderSource = `
                attribute vec2 position;
                uniform mat4 u_projectionMatrix;
                void main() {
                    gl_Position = u_projectionMatrix * vec4(position, 0.0, 1.0);
                    gl_PointSize = 0.1; // Tamaño de los puntos
                }
            `;

            const fragmentShaderSource = `
                precision mediump float;
                void main() {
                    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);
                }
            `;

            // Crear los shaders
            const vertexShader = gl.createShader(gl.VERTEX_SHADER);
            gl.shaderSource(vertexShader, vertexShaderSource);
            gl.compileShader(vertexShader);

            const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
            gl.shaderSource(fragmentShader, fragmentShaderSource);
            gl.compileShader(fragmentShader);

            // Crear el programa
            const shaderProgram = gl.createProgram();
            gl.attachShader(shaderProgram, vertexShader);
            gl.attachShader(shaderProgram, fragmentShader);
            gl.linkProgram(shaderProgram);
            gl.useProgram(shaderProgram);

            // Pasar la matriz de proyección al shader
            const projectionMatrixLocation = gl.getUniformLocation(shaderProgram, 'u_projectionMatrix');
            gl.uniformMatrix4fv(projectionMatrixLocation, false, projectionMatrix
            // new Float32Array(shaderProgram)
            );

            // Vincular el buffer al atributo de posición del shader
            const positionAttributeLocation = gl.getAttribLocation(shaderProgram, 'position');
            gl.enableVertexAttribArray(positionAttributeLocation);
            gl.vertexAttribPointer(positionAttributeLocation, 2, gl.FLOAT, false, 0, 0);

            // Limpiar el lienzo y dibujar la línea 
            gl.clearColor(0.0, 0.0, 0.0, 0.0); // Color de fondo negro
            gl.clear(gl.COLOR_BUFFER_BIT);
            gl.drawArrays(gl.POINTS, 0, vertices.length / 2); // Dibujar puntos 
            gl.deleteBuffer(vertexBuffer);
            load = true;
        } 
    </script>

    <script> 
        function Regla() {
            const canvas = document.getElementById('plano-canvas');
            const gl = canvas.getContext('webgl', {antialias:true} );
            const canvasWidth = canvas.clientWidth;
            const canvasHeight = canvas.clientHeight;
            const aspectRat = canvasWidth / canvasHeight;
            gl.viewport(0, 0, canvasWidth, canvasHeight);

            const projectionMatrix = mat4.create();
            mat4.ortho(projectionMatrix, -175, 175, -100, 100, -1, 1);

            var section = document.getElementById('loading');

            section.style.display = 'none';
            // 'none'; 

            const vertices = [ 
                0,100,

                0,90,
                3,90,
                -3,90,
                0,90,

                0,80,
                3,80,
                -3,80,
                0,80,

                0,70,
                3,70,
                -3,70,
                0,70,

                0,60,
                3,60,
                -3,60,
                0,60,

                0,50,
                3,50,
                -3,50,
                0,50,

                0,40,
                3,40,
                -3,40,
                0,40,

                0,30,
                3,30,
                -3,30,
                0,30,

                0,20,
                3,20,
                -3,20,
                0,20,

                0,10,
                3,10,
                -3,10,
                0,10,

                0,-10,
                3,-10,
                -3,-10,
                0,-10,
    
                0,-20,
                3,-20,
                -3,-20,
                0,-20,

                0,-30,
                3,-30,
                -3,-30,
                0,-30,

                0,-40,
                3,-40,
                -3,-40,
                0,-40,
                
                0,-50,
                3,-50,
                -3,-50,
                0,-50,
                
                0,-60,
                3,-60,
                -3,-60,
                0,-60,
                
                0,-70,
                3,-70,
                -3,-70,
                0,-70,
                
                0,-80,
                3,-80,
                -3,-80,
                0,-80,

                0,-90,
                3,-90,
                -3,-90,
                0,-90,

                0,-100,
                0,0,

                -10,0,
                -10,3,
                -10,-3,
                -10,0,

                -20,0,
                -20,3,
                -20,-3,
                -20,0,

                -30,0,
                -30,3,
                -30,-3,
                -30,0,

                -40,0,
                -40,3,
                -40,-3,
                -40,0,

                -50,0,
                -50,3,
                -50,-3,
                -50,0,

                -60,0,
                -60,3,
                -60,-3,
                -60,0,

                -70,0,
                -70,3,
                -70,-3,
                -70,0,

                -80,0,
                -80,3,
                -80,-3,
                -80,0,

                -90,0,
                -90,3,
                -90,-3,
                -90,0,

                -100,0,
                -100,3,
                -100,-3,
                -100,0,

                -110,0,
                -110,3,
                -110,-3,
                -110,0,

                -120,0,
                -120,3,
                -120,-3,
                -120,0,

                -130,0,
                -130,3,
                -130,-3,
                -130,0,

                -140,0,
                -140,3,
                -140,-3,
                -140,0,

                -150,0,
                -150,3,
                -150,-3,
                -150,0,

                150,0,

                10,0,
                10,3,
                10,-3,
                10,0,

                20,0,
                20,3,
                20,-3,
                20,0,

                30,0,
                30,3,
                30,-3,
                30,0,

                40,0,
                40,3,
                40,-3,
                40,0,

                50,0,
                50,3,
                50,-3,
                50,0,

                60,0,
                60,3,
                60,-3,
                60,0,

                70,0,
                70,3,
                70,-3,
                70,0,

                80,0,
                80,3,
                80,-3,
                80,0,

                90,0,
                90,3,
                90,-3,
                90,0,

                100,0,
                100,3,
                100,-3,
                100,0,

                110,0,
                110,3,
                110,-3,
                110,0,

                120,0,
                120,3,
                120,-3,
                120,0,

                130,0,
                130,3,
                130,-3,
                130,0,

                140,0,
                140,3,
                140,-3,
                140,0,

                150,0,
                150,3,
                150,-3,
                150,0,

            ];

            if (!gl) {
                console.error('Tu navegador no soporta WebGL');
                return;
            } 

            // Crear un buffer para los vértices
            const vertexBuffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);

            // Crear el programa de shaders
            const vertexShaderSource = `
                attribute vec2 position;
                uniform mat4 u_projectionMatrix;
                void main() {
                    gl_Position = u_projectionMatrix * vec4(position, 0.0, 1.0);
                    gl_PointSize = 0.1; // Tamaño de los puntos
                }
            `;

            const fragmentShaderSource = `
                precision mediump float;
                void main() {
                    gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
                }
            `;

            // Crear los shaders
            const vertexShader = gl.createShader(gl.VERTEX_SHADER);
            gl.shaderSource(vertexShader, vertexShaderSource);
            gl.compileShader(vertexShader);

            const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
            gl.shaderSource(fragmentShader, fragmentShaderSource);
            gl.compileShader(fragmentShader);

            // Crear el programa
            const shaderProgram = gl.createProgram();
            gl.attachShader(shaderProgram, vertexShader);
            gl.attachShader(shaderProgram, fragmentShader);
            gl.linkProgram(shaderProgram);
            gl.useProgram(shaderProgram);

            // Pasar la matriz de proyección al shader
            const projectionMatrixLocation = gl.getUniformLocation(shaderProgram, 'u_projectionMatrix');
            gl.uniformMatrix4fv(projectionMatrixLocation, false, projectionMatrix
            // new Float32Array(shaderProgram)
            );

            // Vincular el buffer al atributo de posición del shader
            const positionAttributeLocation = gl.getAttribLocation(shaderProgram, 'position');
            gl.enableVertexAttribArray(positionAttributeLocation);
            gl.vertexAttribPointer(positionAttributeLocation, 2, gl.FLOAT, false, 0, 0);

            // Limpiar el lienzo y dibujar la línea 
            gl.clearColor(0.0, 0.0, 0.0, 0.0); // Color de fondo negro
            gl.clear(gl.COLOR_BUFFER_BIT);
            gl.drawArrays(gl.LINES, 0, vertices.length / 2); // Dibujar puntos 
            gl.deleteBuffer(vertexBuffer); 
        } 
    </script>
</body>
</html>